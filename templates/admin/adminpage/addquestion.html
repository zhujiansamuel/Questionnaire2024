{% extends "admin/base_site.html" %}


{% block pretitle %}
    <div id="content-main">
    <div class="module filtered" id="changelist">
        <h2>調査セット「{{ survey }}」への質問追加</h2>
    </div>
    </div>
{% endblock %}


{% block content_title %}
    <div id="content-main">
    <div class="module filtered" id="changelist">
        <h3>調査セット「{{ survey }}」への質問追加</h3>
        <p id="survey-id" hidden>{{ survey.id }}</p>
    </div>
    </div>
  <div>

{% endblock %}


{% block content %}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    

    
    <div id="content-main">
        <div class="module filtered" id="changelist">
            
            <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
              <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked>
              <label class="btn btn-outline-primary" for="btnradio1">デフォルト・ランダム</label>
            
              <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
              <label class="btn btn-outline-primary" for="btnradio2">グループ分け</label>
            
              <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
              <label class="btn btn-outline-primary" for="btnradio3">順番固定</label>
                
              <input type="radio" class="btn-check" name="btnradio" id="btnradio4" autocomplete="off">
              <label class="btn btn-outline-primary" for="btnradio4">枝分かれ</label>
                
            </div>
            
            <div id="">
                
                <form id="formId" method='POST' action='/dashboards/{{ survey.id }}/add-default-random-question/'>
                    {% csrf_token %}
                    <div id="questioninput">
                        
                    </div>    
                    
                    <button name="btn_submit" type="submit">
                      送信する
                    </button>
                  <button id="add-form" type="button" class="btn btn-primary">Primary</button>
                </form>
            </div>
            
        </div>
    </div>
    
    <script>
    


    $('#btnradio1').click(function(){
        var survey_id = $( "#survey-id" ).text();
        $.get('/dashboards/{{ survey.id }}/add-default-random-question/', {survey_id: survey_id}, function(data){
                   $('#questioninput').html(data);
        });
        $('#formId').attr('action', '/dashboards/{{ survey.id }}/add-default-random-question/');
    });
    
    $('#btnradio2').click(function(){
        var survey_id = $( "#survey-id" ).text();
        $.get('/dashboards/{{ survey.id }}/add-one-random-question/', {survey_id: survey_id}, function(data){
                   $('#questioninput').html(data);
        });
        $('#formId').attr('action', '/dashboards/{{ survey.id }}/add-one-random-question/');
    });
    
    $('#btnradio3').click(function(){
        var survey_id = $( "#survey-id" ).text();
        $.get('/dashboards/{{ survey.id }}/add-sequence-question/', {survey_id: survey_id}, function(data){
                   $('#questioninput').html(data);
        });
        $('#formId').attr('action', '/dashboards/{{ survey.id }}/add-sequence-question/');
    });
        
    $('#btnradio4').click(function(){
        var survey_id = $( "#survey-id" ).text();
        $.get('/dashboards/{{ survey.id }}/add-branch-question/', {survey_id: survey_id}, function(data){
                   $('#questioninput').html(data);
        });
        $('#formId').attr('action', '/dashboards/{{ survey.id }}/add-branch-question/');
    });
    
    {#$('#add-form').click(function(){#}
    {#    var survey_id = $( "#survey-id" ).text();#}
    {#    var csrftoken = $("[name=csrfmiddlewaretoken]").val();#}
    {#    $.ajax({#}
    {#        url: '/dashboards/add-one-random-question/',#}
    {#        type: 'post',#}
    {#        data: {#}
    {#            survey_id: survey_id#}
    {#        },#}
    {#        headers: { "X-CSRFToken": csrftoken },#}
    {#        dataType: 'json',#}
    {#        success: function (data) {#}
    {#            $('#questioninput').html(data);#}
    {#        }#}
    {#    });#}
    {#    #}
    {#});#}
    
    
    
    
    </script>

    

{% endblock %}


{% block sidebar %}
 
{% endblock %}

